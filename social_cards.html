<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
        <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>

        <script type="application/javascript">
            var injectedObject = {
                "title": "Join League of Kingdoms Socials",
                "description": "$1 reward (2 $LOKA token) for first 1000 to complete.",
                "url": "https://www.w3schools.com/howto/howto_css_social_cards.asp",
                "image": "https://www.w3schools.com/howto/img_avatar.png",
                "claimString": "80/100",
                "twitterComplete": true,
                "discordComplete": false,
                "gameName": "League of Kingdoms",
            };

            const gameName = injectedObject.gameName;

            showModalTwitter = function() {
                document.getElementById("twittermodal").style.display = "block";
            }

            closeModalTwitter = function() {
                document.getElementById("twittermodal").style.display = "none";
            }

            showModalDiscord = function() {
                document.getElementById("discordmodal").style.display = "block";
            }

            closeModalDiscord = function() {
                document.getElementById("discordmodal").style.display = "none";
            }

            // update claimed-title text with claimString
            document.addEventListener("DOMContentLoaded", function(event) {
                document.getElementById("title").innerHTML = injectedObject.title;
            });

            // update claimed-title text with claimString
            document.addEventListener("DOMContentLoaded", function(event) {
                document.getElementById("description").innerHTML = injectedObject.description;
            });

            // update claimed-title text with claimString
            document.addEventListener("DOMContentLoaded", function(event) {
                document.getElementById("claimed-title").innerHTML = injectedObject.claimString + " people claimed";
            });

            // update logo-image with injectedObject.image
            document.addEventListener("DOMContentLoaded", function(event) {
                document.getElementById("logo-image").src = injectedObject.image;
            });

            // hide twitter button if twitterComplete is false
            document.addEventListener("DOMContentLoaded", function(event) {
                if (injectedObject.twitterComplete == true) {
                    document.getElementById("twitter-table-button").style.display = "none";
                    document.getElementById("twitter-table-tick-icon").style.display = "block";
                } else {
                    document.getElementById("twitter-table-button").style.display = "block";
                    document.getElementById("twitter-table-tick-icon").style.display = "none";
                }
            });

            // hide twitter button if twitterComplete is false
            document.addEventListener("DOMContentLoaded", function(event) {
                if (injectedObject.discordComplete == true) {
                    document.getElementById("discord-table-button").style.display = "none";
                    document.getElementById("discord-table-tick-icon").style.display = "block";
                } else {
                    document.getElementById("discord-table-button").style.display = "block";
                    document.getElementById("discord-table-tick-icon").style.display = "none";
                }
            });
        </script>

        <style>
            .modal {
                display: none;
                position: fixed;
                z-index: 1;
                padding-top: 100px;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                overflow: auto;
                background-color: rgb(0,0,0);
                background-color: rgba(0,0,0,0.4);
                padding-bottom: 30px;
            }

            .modal-content {
                background-color: #000;
                margin: auto;
                padding: 20px;
                /* border: 1px solid #888; */
                /* width: 80%; */
            }

            .close {
                color: #aaaaaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
            }

            .close:hover,
            .close:focus {
                color: #000;
                text-decoration: none;
                cursor: pointer;
            }
            
            .modal-title {
                font-family: 'Inter';
                font-style: normal;
                font-weight: 600;
                font-size: 20px;
                line-height: 125%;
                display: flex;
                align-items: center;
                text-align: center;
                letter-spacing: 0.1px;
                color: #FFFFFF;
                margin-top: 57px;
                margin-bottom: 31px;
                justify-content: center;
            }

            .blue-button {
                background: linear-gradient(90.07deg, #3999F9 29.06%, #4A7DFF 96.96%);
                border-radius: 8px;
                font-family: 'Inter';
                font-style: normal;
                font-weight: 600;
                font-size: 12px;
                line-height: 125%;
                display: flex;
                align-items: center;
                letter-spacing: 0.1px;
                color: #FFFFFF;
                padding: 6px;
                width: 65px;
                text-align: center;
                justify-content: center;
                box-shadow: none;
                border: none;
                padding-top: 12px;
                padding-bottom: 12px;
            }
        </style>

        <style>
             * {
                font-family: 'Poppins', monospace;
                color: white;
            }            

            .wrapper-card {
                background: linear-gradient(180deg, #110F40 0%, #1B1694 70.31%, #6F09DB 100%);
                border-radius: 16px;
                padding: 18px 12px;
            }

            .title {
                font-family: 'Poppins';
                font-style: normal;
                font-weight: 600;
                font-size: 20px;
                line-height: 24px;
                letter-spacing: -1px;
                color: #FFFFFF;
                margin-bottom: 20px;
                max-width: 225px;
            }

            .claimed-title {
                font-family: 'Inter';
                font-style: normal;
                font-weight: 500;
                font-size: 11px;
                line-height: 125%;
                display: flex;
                align-items: center;
                text-align: center;
                letter-spacing: 0.1px;
                color: #FFFFFF;
                opacity: 0.4;
                margin-top: 12px;
                margin-bottom: 12px;
                width: 100%;
                justify-content: center;
            }

            .rounded-wrapper {
                background: rgba(255, 255, 255, 0.08);
                border-radius: 12px;
                padding: 12px 12px;
                font-family: 'Inter';
                font-style: normal;
                font-weight: 500;
                font-size: 14px;
                line-height: 125%;
                display: flex;
                align-items: center;
                letter-spacing: 0.1px;
                color: #FFFFFF;
                justify-content: space-between;
                margin-top: 20px;
            }

            .top-table-card {
                background: rgba(255, 255, 255, 0.08);
                border-radius: 12px 12px 4px 4px;
                padding: 22px 12px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2px;
            }

            .bottom-table-card {
                background: rgba(255, 255, 255, 0.08);
                border-radius: 4px 4px 12px 12px;
                padding: 22px 12px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2px;
            }

            .middle-table-card {
                background: rgba(255, 255, 255, 0.08);
                border-radius: 4px;
                padding: 22px 12px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2px;
            }

            .table-card-title {
                font-family: 'Inter';
                font-style: normal;
                font-weight: 500;
                font-size: 14px;
                line-height: 125%;
                display: flex;
                align-items: center;
                letter-spacing: 0.1px;
                color: #FFFFFF;
            }

            .table-card-button {
                background: linear-gradient(219.64deg, #FF5C66 6.71%, #B004FF 52.64%, #7200FF 93.17%);
                border-radius: 12px;
                font-family: 'Inter';
                font-style: normal;
                font-weight: 600;
                font-size: 12px;
                line-height: 125%;
                display: flex;
                align-items: center;
                letter-spacing: 0.1px;
                color: #FFFFFF;
                padding: 6px;
                width: 65px;
                text-align: center;
                justify-content: center;
                box-shadow: none;
                border: none;
            }

            #status-text {
                font-family: 'Inter';
                font-style: normal;
                font-weight: 500;
                font-size: 14px;
                line-height: 18px;
                text-align: center;
                letter-spacing: 0.2px;
                color: #FF6060;
                display: flex;
                justify-content: center;
            }
        </style>
    </head>

    <body style="padding: 16px; background-color: #000;">
        <div class="wrapper-card">
            <img src="" id="logo-image" style="width: 24px; height: 24px; margin-bottom: 12px;">
            <br/>
            <div id="title" class="title"></div>
            <div class="rounded-wrapper">
                <span id="description"></span>
                <img src="./assets/icons/dollar_coin.svg" style="width: 65px; position: relative; top: 11px;">
            </div>
            <span class="claimed-title">80/1000 people claimed</span>

            <div class="top-table-card">
                <span class="table-card-title">Twitter</span>
                <button id="twitter-table-button" onclick="triggerTwitterFollowFlow()" class="table-card-button">Follow</button>
                <div id="twitter-table-tick-icon" style="display: none; background: rgba(0, 0, 0, 0.08); border-radius: 12px; padding: 4px;">
                    <img src="./assets/icons/tick.svg" />
                </div>
                
            </div>
            <div class="bottom-table-card">
                <span class="table-card-title">Discord</span>
                <button id="discord-table-button" onclick="triggerDiscordLoginFlow()" class="table-card-button">Log in</button>
                <div id="discord-table-tick-icon" style="display: none; background: rgba(0, 0, 0, 0.08); border-radius: 12px; padding: 4px;">
                    <img src="./assets/icons/tick.svg" />
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div id="twittermodal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModalTwitter()">&times;</span>
                <span class="modal-title">Enter your twitter @</span>
                <input id="twitter-input-box" placeholder="Enter twitter username" style="background: #141624; width: 100%; padding: 21px 15px; border: none !important;"/>
                <span style="margin-top: 20px;" id="status-text"> </span>
                <button style="margin-top: 20px; width: 100%;" onclick="checkTwitterAPIForFollow()" class="blue-button">Submit</button>
            </div>
        <!-- <div style="display: flex; flex-direction: column;">
        
            <p style="font-size: 26px; font-weight: 600; margin-top: -12px;">Play League of Kingdoms,<br>level up & win crypto</p>

           <div id='wallet-winnings-container' class="winnings-container">

                <div style="float: left; margin-left: 16px; width: 50%;">
                    <p style="font-size: 13px;">Your winning</p>

                    <div style="display: flex; flex-direction: row;">
                        <p style="font-size: 20px; font-weight: 600; line-height: 4px; margin-top: 4px;">1 NFT</p>
                        <p style="opacity: 0.7; font-size: 13px; line-height: 4px; margin-top: 4px; margin-left: 8px;">$10</p>
                    </div>

                </div>

                <div class="check-wallet-button">
                    <p style="color: #E0417D; padding-right: 8px;">Check wallet</p>
                    <img src="./wallet.svg" width="12px" height="12px">
                </div>
           </div>

            <img id="prize-pool-image" src="https://android-hosted-assets.s3.ap-south-1.amazonaws.com/images/glip_lok_prizepool_banner.png"/>

            <div class="contest-container">
                <div style="display: flex; flex-direction:column; flex: 1;  align-items: center; justify-content: center;">
                        <p class="contest-dim-text">Contest ends in</p>
                        <p id='contest-end-timer' class="contest-normal-text"></p>
                </div>
                <div class="vertical-divider" ></div>
                <div style="display: flex; flex-direction:column; flex: 1;  align-items: center; justify-content: center;">
                    <p class="contest-dim-text">Your castle level</p>
                    <p id='user-level' class="contest-normal-text">-</p>
                </div>    
            </div>

            <input id="type-ign-enabled" class="ign-input" type="text" placeholder="Type your in game name here">

            <p id='cta' class="cta-button">Install Game</p>
            
            <p id='type-ign-disabled' class="disabled-button">Type your in game name here</p>

            <p id='install-subtitle' style="font-size: 12px; margin-top: -12px; text-align: center;">⚠️ After installing, come back to this page & enter name</p>

            <p style="font-weight: 500; font-size: 18px">Battlepower Leaderboard</p>

            <div id="leaderboard-list" class="leaderboard-container">
                <ul class="list">
      
                    <li class="leaderboard-list-item" id="leaderboard-item-self" style="padding-top: 8px;">
                        <img class="profileImage" >
                        <div style="display: flex; flex-direction: column; margin-left: 14px; flex: 1;">
                            <p class='leaderboardIgn' style="font-size: 13px; line-height: 1px;"></p>
                            <p class='leaderboardRank' style="font-size: 13px; opacity: 0.3; line-height: 1px; margin-top: 6px;"></p>
                        </div>

                        <div style="display: flex; flex-direction: column; margin-left: 14px; flex: 1; align-items: flex-end; margin-right: 8px;">
                            <p class='leaderboardPower' style="font-size: 13px; line-height: 1px;"></p>
                            <p class='leaderboardPrize' style="font-size: 13px; opacity: 0.3; line-height: 1px; margin-top: 6px;"></p>
                        </div>
                    </li>
                </ul>
              </div>

        </div> -->

    </body>

    <script>
        triggerTwitterFollowFlow = () => {
            // open modal
            showModalTwitter();
            // window.open("https://twitter.com/intent/follow?screen_name=LeagueKingdoms", '_blank');
        };

        triggerDiscordLoginFlow = () => {
            window.open("https://discord.gg/leagueofkingdoms", '_blank');
        };

        checkTwitterAPIForFollow = () => {
            console.log('asdfsaf');
            const twitterUsername = document.getElementById('twitter-input-box').value;
            console.log(twitterUsername);
            if (twitterUsername) {
                //      window.open(`https://twitter.com/${twitterUsername}`, '_blank');
                // Show success message
                // Hide modal
                // closeModalTwitter();
                // update status text
                // make api call to check if user is following
                // if yes, show success message
                // if no, show error message
                const success = true;
                if(success) {
                    document.getElementById('status-text').innerHTML = 'Success! You are now following ' + gameName;
                    injectedObject.twitterComplete = true; // setting the attribute in injected object to true
                    // closeModalTwitter after waiting 500ms
                    setTimeout(() => {
                        closeModalTwitter();
                    }, 1500);
                } else {
                // Show error message
                    document.getElementById('status-text').innerHTML = 'This twitter username is not following ' + gameName;                    
                }
            } else {
                document.getElementById('status-text').innerHTML = 'Please enter a valid twitter username';
            }
        };

        

    </script>
    <!-- <script type="application/javascript" src="./index.js"></script> -->

</html>